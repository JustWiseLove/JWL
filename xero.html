<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Real-time weather for North East, MD, with forecasts and world news.">
    <meta name="keywords" content="weather, North East MD, forecast, news">
    <title>Weather - North East, MD</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <link href="https://fonts.googleapis.com/css2?family=Audiowide&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Ensure header consistency with index.html */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background: linear-gradient(90deg, #2a6626, #6b9e31, #2a6626);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .logo {
            flex-grow: 1;
            text-align: center;
        }

        .logo h1 {
            font-family: 'Audiowide', Arial, sans-serif;
            font-size: 2.5rem;
            color: #fff;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .logo a {
            text-decoration: none;
        }

        .nav-left, .nav-right {
            position: relative;
        }

        .hamburger-left, .hamburger-right {
            background: none;
            border: none;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            width: 30px;
            height: 20px;
        }

        .hamburger-left span, .hamburger-right span {
            background: #fff;
            height: 3px;
            width: 100%;
            transition: all 0.3s ease;
        }

        .hamburger-left.active span:nth-child(1), .hamburger-right.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .hamburger-left.active span:nth-child(2), .hamburger-right.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger-left.active span:nth-child(3), .hamburger-right.active span:nth-child(3) {
            transform: rotate(-45deg) translate(5px, -5px);
        }

        .nav-menu-left, .nav-menu-right {
            display: none;
            position: absolute;
            top: 40px;
            background: linear-gradient(90deg, #2a6626, #6b9e31, #2a6626);
            list-style: none;
            padding: 10px;
            margin: 0;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .nav-menu-left.active, .nav-menu-right.active {
            display: block;
        }

        .nav-menu-left li, .nav-menu-right li {
            margin: 5px 0;
        }

        .nav-menu-left a, .nav-menu-right a {
            color: #fff;
            text-decoration: none;
            font-family: 'Audiowide', Arial, sans-serif;
            font-size: 1rem;
        }

        .nav-menu-left a:hover, .nav-menu-right a:hover {
            text-decoration: underline;
        }

        /* Weather and News styles */
        .intro-content, .weather-container, .news-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
        }

        .weather-current, .weather-forecast, .weather-hourly {
            background: linear-gradient(90deg, #2a6626, #6b9e31, #2a6626);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            color: #fff;
        }

        .weather-current h3, .weather-forecast h3, .weather-hourly h3, .news-container h2 {
            font-family: 'Audiowide', Arial, sans-serif;
            margin-bottom: 15px;
        }

        .weather-data {
            text-align: center;
        }

        .weather-data i {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .weather-data p {
            font-size: 18px;
            margin: 5px 0;
        }

        .forecast-grid, .hourly-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }

        .forecast-day, .hourly-period {
            background: linear-gradient(90deg, #f0f0f0, #d3d3d3);
            color: #333;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .forecast-day h4, .hourly-period h4 {
            font-family: 'Audiowide', Arial, sans-serif;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .forecast-day i, .hourly-period i {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .forecast-day p, .hourly-period p {
            font-size: 14px;
        }

        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .news-article {
            background: linear-gradient(90deg, #f0f0f0, #d3d3d3);
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .news-article img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 5px;
            margin-bottom: 10px;
            display: block; /* Ensure image is visible */
        }

        .news-article .image-fallback {
            width: 100%;
            height: 150px;
            background: #ccc;
            border-radius: 5px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #333;
        }

        .news-article h3 {
            font-family: 'Audiowide', Arial, sans-serif;
            font-size: 18px;
            color: #2a6626;
            margin-bottom: 10px;
        }

        .news-article p {
            font-size: 14px;
            color: #333;
            margin-bottom: 10px;
        }

        .news-article a {
            color: #2a6626;
            text-decoration: none;
            font-weight: bold;
        }

        .news-article a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .weather-current, .weather-forecast, .weather-hourly {
                padding: 15px;
            }

            .forecast-grid, .hourly-grid {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            }

            .news-grid {
                grid-template-columns: 1fr;
            }

            .weather-data i {
                font-size: 36px;
            }

            .weather-data p {
                font-size: 16px;
            }

            .logo h1 {
                font-size: 1.5rem;
            }

            .hamburger-left, .hamburger-right {
                width: 25px;
                height: 15px;
            }

            .nav-menu-left, .nav-menu-right {
                top: 30px;
            }
        }
    </style>
</head>
<body>
    <header>
        <nav class="nav-left">
            <button class="hamburger-left" aria-expanded="false" aria-controls="nav-menu-left" aria-label="Toggle left navigation">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul id="nav-menu-left" class="nav-menu-left">
                <li><a href="walk.html">WALK</a></li>
            </ul>
        </nav>
        <div class="logo">
            <a href="index.html">
                <h1>JWL</h1>
            </a>
        </div>
        <nav class="nav-right">
            <button class="hamburger-right" aria-expanded="false" aria-controls="nav-menu-right" aria-label="Toggle right navigation">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul id="nav-menu-right" class="nav-menu-right">
                <li><a href="wise.html">WISE</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section class="intro">
            <div class="intro-content">
                <h2>Weather for North East, MD</h2>
                <p id="current-time">Current Time: Loading...</p>
            </div>
        </section>
        <section class="weather-container">
            <div class="weather-current">
                <h3>Current Weather</h3>
                <div class="weather-data">
                    <i id="current-icon" class="fas fa-cloud"></i>
                    <p id="current-temp">Loading...</p>
                    <p id="current-condition">Loading...</p>
                </div>
            </div>
            <div class="weather-forecast">
                <h3>7-Day Forecast</h3>
                <div class="forecast-grid" id="daily-forecast">
                    <!-- Populated by JS -->
                </div>
            </div>
            <div class="weather-hourly">
                <h3>Hourly Forecast</h3>
                <div class="hourly-grid" id="hourly-forecast">
                    <!-- Populated by JS -->
                </div>
            </div>
        </section>
        <section class="news-container">
            <h2>World News</h2>
            <div class="news-grid" id="news-articles">
                <!-- Populated by JS -->
            </div>
        </section>
    </main>
    <footer>
        <p>© Just Wise Love</p>
    </footer>
    <script>
        // Weather code to description and Font Awesome icon mapping
        const weatherCodeMap = {
            0: { description: 'Clear sky', icon: 'fas fa-sun' },
            1: { description: 'Mainly clear', icon: 'fas fa-cloud-sun' },
            2: { description: 'Partly cloudy', icon: 'fas fa-cloud-sun' },
            3: { description: 'Overcast', icon: 'fas fa-cloud' },
            45: { description: 'Fog', icon: 'fas fa-smog' },
            48: { description: 'Depositing rime fog', icon: 'fas fa-smog' },
            51: { description: 'Light drizzle', icon: 'fas fa-cloud-rain' },
            53: { description: 'Moderate drizzle', icon: 'fas fa-cloud-rain' },
            55: { description: 'Dense drizzle', icon: 'fas fa-cloud-rain' },
            61: { description: 'Light rain', icon: 'fas fa-cloud-showers-heavy' },
            63: { description: 'Moderate rain', icon: 'fas fa-cloud-showers-heavy' },
            65: { description: 'Heavy rain', icon: 'fas fa-cloud-showers-heavy' },
            71: { description: 'Light snow', icon: 'fas fa-snowflake' },
            73: { description: 'Moderate snow', icon: 'fas fa-snowflake' },
            75: { description: 'Heavy snow', icon: 'fas fa-snowflake' },
            95: { description: 'Thunderstorm', icon: 'fas fa-bolt' }
        };

        // Fallback weather data for May 06, 2025
        const fallbackWeather = {
            current: { temperature: 15, weathercode: 2 }, // 15°C = 59°F, Partly cloudy
            daily: [
                { date: '2025-05-06', maxTemp: 20, minTemp: 10, weathercode: 2 }, // 68°F / 50°F
                { date: '2025-05-07', maxTemp: 22, minTemp: 12, weathercode: 1 }, // 72°F / 54°F
                { date: '2025-05-08', maxTemp: 21, minTemp: 11, weathercode: 3 }, // 70°F / 52°F
                { date: '2025-05-09', maxTemp: 20, minTemp: 10, weathercode: 61 }, // 68°F / 50°F
                { date: '2025-05-10', maxTemp: 19, minTemp: 9, weathercode: 0 }, // 66°F / 48°F
                { date: '2025-05-11', maxTemp: 23, minTemp: 13, weathercode: 2 }, // 73°F / 55°F
                { date: '2025-05-12', maxTemp: 24, minTemp: 14, weathercode: 1 }  // 75°F / 57°F
            ],
            hourly: [
                { time: '2025-05-06T09:00', temperature: 14, weathercode: 2 }, // 57°F
                { time: '2025-05-06T12:00', temperature: 18, weathercode: 2 }, // 64°F
                { time: '2025-05-06T15:00', temperature: 20, weathercode: 1 }, // 68°F
                { time: '2025-05-06T18:00', temperature: 19, weathercode: 3 }, // 66°F
                { time: '2025-05-06T21:00', temperature: 16, weathercode: 2 }, // 61°F
                { time: '2025-05-07T00:00', temperature: 14, weathercode: 2 }, // 57°F
                { time: '2025-05-07T03:00', temperature: 13, weathercode: 1 }, // 55°F
                { time: '2025-05-07T06:00', temperature: 12, weathercode: 0 }  // 54°F
            ]
        };

        // Predefined news articles with alternative image URLs
        const newsArticles = [
            {
                title: 'Global Climate Summit Concludes',
                description: 'The recent global climate summit in Paris ended with new commitments to reduce carbon emissions by 2030. Leaders from 50 countries signed an agreement to invest in renewable energy, aiming to limit global warming to 1.5°C. Environmentalists celebrate the progress, though some call for stricter measures.',
                link: 'https://example.com/climate',
                image: 'https://picsum.photos/300/150?random=1'
            },
            {
                title: 'Tech Breakthrough in AI Research',
                description: 'A major tech firm unveiled a new AI model capable of human-like reasoning, sparking debates on ethics and employment. The model, trained on 10 petabytes of data, could revolutionize industries but raises concerns about job displacement.',
                link: 'https://example.com/ai',
                image: 'https://picsum.photos/300/150?random=2'
            },
            {
                title: 'SpaceX Launches New Satellite',
                description: 'SpaceX successfully launched a new satellite into orbit, enhancing global internet coverage. The mission marks the 100th launch this year, with plans for a lunar mission in 2026. Space enthusiasts are thrilled by the progress.',
                link: 'https://example.com/spacex',
                image: 'https://picsum.photos/300/150?random=3'
            },
            {
                title: 'Economic Recovery Gains Momentum',
                description: 'Global economies show signs of recovery post-pandemic, with GDP growth projected at 3.5% in 2025. Central banks are cautiously optimistic, though inflation remains a concern. Analysts predict a stable year ahead.',
                link: 'https://example.com/economy',
                image: 'https://picsum.photos/300/150?random=4'
            },
            {
                title: 'New Vaccine Approved Worldwide',
                description: 'A new vaccine against a rare disease has been approved by the WHO, offering hope to millions. Clinical trials showed 95% efficacy, and distribution begins next month. Health experts call it a medical milestone.',
                link: 'https://example.com/vaccine',
                image: 'https://picsum.photos/300/150?random=5'
            },
            {
                title: 'Wildfires Threaten Western Regions',
                description: 'Unprecedented wildfires are ravaging western states, fueled by dry conditions and strong winds. Thousands have been evacuated, and firefighters are struggling to contain the blaze. Climate change is cited as a key factor.',
                link: 'https://example.com/wildfires',
                image: 'https://picsum.photos/300/150?random=6'
            },
            {
                title: 'International Peace Talks Resume',
                description: 'Peace talks between two nations resumed after a year-long hiatus, mediated by the UN. Both sides agreed to a ceasefire, raising hopes for a lasting resolution. The global community watches closely.',
                link: 'https://example.com/peace',
                image: 'https://picsum.photos/300/150?random=7'
            },
            {
                title: 'Breakthrough in Quantum Computing',
                description: 'Scientists achieved a breakthrough in quantum computing, solving a complex problem in minutes. The technology could transform cryptography and simulations, though commercial use is years away. Experts are excited.',
                link: 'https://example.com/quantum',
                image: 'https://picsum.photos/300/150?random=8'
            }
        ];

        // Convert Celsius to Fahrenheit
        function celsiusToFahrenheit(celsius) {
            return Math.round((celsius * 9/5) + 32);
        }

        // Format date
        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
        }

        // Format time
        function formatTime(timeStr) {
            const date = new Date(timeStr);
            return date.toLocaleTimeString('en-US', { hour: 'numeric', hour12: true });
        }

        // Find closest past or current 3-hour marker on the current day
        function getClosestHourMarker() {
            const now = new Date();
            const est = new Date(now.toLocaleString('en-US', { timeZone: 'America/New_York' }));
            const currentDate = est.getDate();
            const currentHour = est.getHours();
            const hours = [0, 3, 6, 9, 12, 15, 18, 21];
            console.log('Current EST Hour:', currentHour, 'Date:', currentDate);

            let closestHour = hours.reduce((prev, curr) => 
                Math.abs(curr - currentHour) < Math.abs(prev - currentHour) ? curr : prev
            );

            // If the closest hour is in the future, go back to the previous marker
            if (closestHour > currentHour) {
                const index = hours.indexOf(closestHour);
                closestHour = hours[index - 1] || hours[hours.length - 1];
            }

            return closestHour;
        }

        // Update current time every minute in EST
        function updateTime() {
            const now = new Date().toLocaleString('en-US', { timeZone: 'America/New_York' });
            document.getElementById('current-time').textContent = `Current Time: ${now}`;
        }
        updateTime();
        setInterval(updateTime, 60000);

        // Fetch weather data (using fallback for now)
        function fetchWeather() {
            const data = fallbackWeather; // Using fallback data since no API call is made
            console.log('Using fallback weather data');

            // Current weather
            const currentTemp = celsiusToFahrenheit(data.current.temperature);
            const currentCode = data.current.weathercode;
            const currentCondition = weatherCodeMap[currentCode].description;
            const currentIcon = weatherCodeMap[currentCode].icon;

            document.getElementById('current-temp').textContent = `${currentTemp}°F`;
            document.getElementById('current-condition').textContent = currentCondition;
            document.getElementById('current-icon').className = currentIcon;

            // 7-day forecast
            const dailyForecast = document.getElementById('daily-forecast');
            dailyForecast.innerHTML = '';
            data.daily.forEach(day => {
                const maxTemp = celsiusToFahrenheit(day.maxTemp);
                const minTemp = celsiusToFahrenheit(day.minTemp);
                const condition = weatherCodeMap[day.weathercode].description;
                const icon = weatherCodeMap[day.weathercode].icon;

                dailyForecast.innerHTML += `
                    <div class="forecast-day">
                        <h4>${formatDate(day.date)}</h4>
                        <i class="${icon}"></i>
                        <p>High: ${maxTemp}°F</p>
                        <p>Low: ${minTemp}°F</p>
                        <p>${condition}</p>
                    </div>
                `;
            });

            // Hourly forecast
            const hourlyForecast = document.getElementById('hourly-forecast');
            hourlyForecast.innerHTML = '';
            const startHour = getClosestHourMarker();
            const currentDay = new Date().toISOString().split('T')[0]; // Current date in YYYY-MM-DD format

            // Filter hourly data to only include entries for the current day (2025-05-06)
            const todayHourly = data.hourly.filter(h => h.time.startsWith(currentDay));
            const startIndex = todayHourly.findIndex(h => {
                const date = new Date(h.time);
                return date.getHours() === startHour;
            });

            if (startIndex === -1 || todayHourly.length === 0) {
                console.error('Could not find starting hour for today, using default');
                for (let i = 0; i < 8; i++) {
                    const hour = data.hourly[i];
                    const temp = celsiusToFahrenheit(hour.temperature);
                    const condition = weatherCodeMap[hour.weathercode].description;
                    const icon = weatherCodeMap[hour.weathercode].icon;
                    hourlyForecast.innerHTML += `
                        <div class="hourly-period">
                            <h4>${formatTime(hour.time)}</h4>
                            <i class="${icon}"></i>
                            <p>${temp}°F</p>
                            <p>${condition}</p>
                        </div>
                    `;
                }
            } else {
                for (let i = startIndex; i < startIndex + 8; i++) {
                    if (i >= todayHourly.length) break;
                    const hour = todayHourly[i];
                    const temp = celsiusToFahrenheit(hour.temperature);
                    const condition = weatherCodeMap[hour.weathercode].description;
                    const icon = weatherCodeMap[hour.weathercode].icon;
                    hourlyForecast.innerHTML += `
                        <div class="hourly-period">
                            <h4>${formatTime(hour.time)}</h4>
                            <i class="${icon}"></i>
                            <p>${temp}°F</p>
                            <p>${condition}</p>
                        </div>
                    `;
                }
            }
        }

        // Display news articles with image error handling
        function displayNews() {
            const newsGrid = document.getElementById('news-articles');
            newsGrid.innerHTML = '';
            newsArticles.forEach(article => {
                newsGrid.innerHTML += `
                    <div class="news-article">
                        <img src="${article.image}" alt="${article.title}" loading="lazy" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="image-fallback" style="display: none;">Image Not Available</div>
                        <h3>${article.title}</h3>
                        <p>${article.description}</p>
                        <a href="${article.link}" target="_blank">Read More</a>
                    </div>
                `;
            });
        }

        // Initialize
        fetchWeather();
        displayNews();

        // Hamburger menu toggle
        const hamburgerLeft = document.querySelector('.hamburger-left');
        const navMenuLeft = document.querySelector('.nav-menu-left');
        hamburgerLeft.addEventListener('click', () => {
            hamburgerLeft.classList.toggle('active');
            navMenuLeft.classList.toggle('active');
            const isExpanded = hamburgerLeft.getAttribute('aria-expanded') === 'true';
            hamburgerLeft.setAttribute('aria-expanded', !isExpanded);
        });

        const hamburgerRight = document.querySelector('.hamburger-right');
        const navMenuRight = document.querySelector('.nav-menu-right');
        hamburgerRight.addEventListener('click', () => {
            hamburgerRight.classList.toggle('active');
            navMenuRight.classList.toggle('active');
            const isExpanded = hamburgerRight.getAttribute('aria-expanded') === 'true';
            hamburgerRight.setAttribute('aria-expanded', !isExpanded);
        });

        document.querySelectorAll('.nav-menu-left a, .nav-menu-right a').forEach(link => {
            link.addEventListener('click', () => {
                hamburgerLeft.classList.remove('active');
                navMenuLeft.classList.remove('active');
                hamburgerLeft.setAttribute('aria-expanded', 'false');
                hamburgerRight.classList.remove('active');
                navMenuRight.classList.remove('active');
                hamburgerRight.setAttribute('aria-expanded', 'false');
            });
        });
    </script>
</body>
</html>
